# Модель базы данных — AI Auto Applier

## Таблица: User (Пользователь)
| Поле          | Тип данных   | Описание                              | Примечания                       |
|---------------|--------------|-------------------------------------|---------------------------------|
| id            | UUID         | Уникальный идентификатор пользователя | PRIMARY KEY                     |
| name          | VARCHAR(50)  | Имя пользователя                    |                                 |
| email         | VARCHAR(50)  | Email пользователя                  | UNIQUE, для логина              |
| password_hash | VARCHAR(255) | Хэш пароля                         | Если планируется авторизация    |
| created_at    | TIMESTAMP    | Дата и время создания записи       | DEFAULT CURRENT_TIMESTAMP       |
| updated_at    | TIMESTAMP    | Дата и время последнего обновления |                                 |

---

## Таблица: FilterSettings (Настройки фильтров)
| Поле          | Тип данных  | Описание                  | Примечания                   |
|---------------|-------------|---------------------------|------------------------------|
| id            | UUID        | Уникальный идентификатор  | PRIMARY KEY                  |
| user_id       | UUID        | Ссылка на пользователя    | FOREIGN KEY -> User(id)      |
| city          | VARCHAR(50) | Город поиска вакансий     |                              |
| salary_min    | INTEGER     | Минимальная зарплата      |                              |
| salary_max    | INTEGER     | Максимальная зарплата     |                              |
| work_format   | VARCHAR(50) | Формат работы             | "remote", "office", "hybrid" |
| keywords      | TEXT        | Ключевые слова для поиска | Можно хранить в JSON         |
| created_at    | TIMESTAMP   | Дата создания             | DEFAULT CURRENT_TIMESTAMP    |
| updated_at    | TIMESTAMP   | Дата обновления           |                              |

---

## Таблица: Vacancy (Вакансия)
| Поле          | Тип данных   | Описание                              | Примечания                       |
|---------------|--------------|-------------------------------------|---------------------------------|
| id            | UUID         | Внутренний ID вакансии               | PRIMARY KEY                     |
| hh_vacancy_id | VARCHAR(50)  | ID вакансии из hh.ru API             | Для связи с внешним API         |
| user_id       | UUID         | Владелец вакансии (соискатель)      | FOREIGN KEY -> User(id)         |
| title         | VARCHAR(255) | Название вакансии                   |                                 |
| company       | VARCHAR(255) | Компания                           |                                 |
| description   | TEXT         | Описание вакансии                   |                                 |
| url           | VARCHAR(500) | Ссылка на вакансию                  |                                 |
| published_at  | TIMESTAMP    | Дата публикации вакансии            |                                 |
| fetched_at    | TIMESTAMP    | Дата и время получения вакансии     |                                 |

---

## Таблица: Application (Отклик)
| Поле               | Тип данных  | Описание                              | Примечания                       |
|--------------------|-------------|-------------------------------------|---------------------------------|
| id                 | UUID        | Уникальный идентификатор отклика     | PRIMARY KEY                     |
| vacancy_id         | UUID        | Вакансия                            | FOREIGN KEY -> Vacancy(id)      |
| user_id            | UUID        | Пользователь, отправивший отклик    | FOREIGN KEY -> User(id)         |
| applied_at         | TIMESTAMP   | Дата и время отклика                | DEFAULT CURRENT_TIMESTAMP       |
| status             | VARCHAR(50) | Статус отклика (отправлен, ошибка) |                                 |
| cover_letter       | TEXT        | Текст сопроводительного письма      |                                 |

---

## Таблица: Log (Логи)
| Поле          | Тип данных   | Описание                              | Примечания                       |
|---------------|--------------|-------------------------------------|---------------------------------|
| id            | UUID         | Уникальный идентификатор записи лога | PRIMARY KEY                     |
| user_id       | UUID         | Пользователь                        | FOREIGN KEY -> User(id)         |
| action        | VARCHAR(255) | Действие (например, "отклик отправлен") |                             |
| description   | TEXT         | Детали действия или ошибки          |                                 |
| created_at    | TIMESTAMP    | Дата и время записи                 | DEFAULT CURRENT_TIMESTAMP       |

## Таблица: ApiTokens (Токены доступа к внешним API)

| Поле           | Тип данных  | Описание                         | Примечания                     |
|----------------|-------------|---------------------------------|-------------------------------|
| id             | UUID        | Уникальный идентификатор         | PRIMARY KEY                   |
| user_id        | UUID        | Владелец токена (если нужно)     | FOREIGN KEY -> User(id)       |
| service_name   | VARCHAR(50) | Название сервиса (например, "hh.ru",<br/> "gigaChat") |                              |
| access_token   | TEXT        | Сам токен доступа                |                               |
| refresh_token  | TEXT        | Токен для обновления (если есть) |                               |
| expires_at     | TIMESTAMP   | Время истечения действия токена  |                               |
| created_at     | TIMESTAMP   | Дата создания записи             | DEFAULT CURRENT_TIMESTAMP     |
| updated_at     | TIMESTAMP   | Дата обновления токена           |                               |

> **Примечание:** Токены должны храниться в безопасном виде, возможно, с шифрованием. Доступ к этим данным ограничен приложением.

| Поле        | Тип данных  | Описание                          | Примечания                          |
|-------------|-------------|----------------------------------|------------------------------------|
| id          | UUID        | Уникальный идентификатор резюме  | PRIMARY KEY                       |
| user_id     | UUID        | Владелец резюме                  | FOREIGN KEY → User(id)             |
| title       | VARCHAR(50) | Название резюме                  |                                    |
| content     | TEXT        | Текст резюме или JSON структура  |                                    |
| source      | VARCHAR(50) | Источник резюме                  | Например: `hh`, `upload`, `manual` |
| created_at  | TIMESTAMP   | Дата создания                   | DEFAULT CURRENT_TIMESTAMP           |
| updated_at  | TIMESTAMP   | Дата последнего обновления      |                                    |